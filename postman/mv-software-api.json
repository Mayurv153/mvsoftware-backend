{
    "info": {
        "name": "MV Software Backend API",
        "description": "Production API collection for MV Software backend â€” payments, service requests, admin, and agent endpoints.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:5000"
        },
        {
            "key": "authToken",
            "value": "YOUR_SUPABASE_JWT_TOKEN"
        }
    ],
    "item": [
        {
            "name": "Health",
            "item": [
                {
                    "name": "Health Check",
                    "request": {
                        "method": "GET",
                        "url": {
                            "raw": "{{baseUrl}}/api/health",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "health"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Service Requests",
            "item": [
                {
                    "name": "Submit Service Request",
                    "request": {
                        "method": "POST",
                        "url": {
                            "raw": "{{baseUrl}}/api/service-requests",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "service-requests"
                            ]
                        },
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+919876543210\",\n  \"plan_slug\": \"growth\",\n  \"message\": \"I need a 5-page website for my restaurant business. I want it to be modern, mobile-friendly, and include an online menu.\"\n}"
                        }
                    }
                }
            ]
        },
        {
            "name": "Payments",
            "item": [
                {
                    "name": "Create Order",
                    "request": {
                        "method": "POST",
                        "url": {
                            "raw": "{{baseUrl}}/api/payments/create-order",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "payments",
                                "create-order"
                            ]
                        },
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{authToken}}"
                            },
                            {
                                "key": "Idempotency-Key",
                                "value": "order_{{$timestamp}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"plan_slug\": \"starter\"\n}"
                        }
                    }
                },
                {
                    "name": "Verify Payment",
                    "request": {
                        "method": "POST",
                        "url": {
                            "raw": "{{baseUrl}}/api/payments/verify",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "payments",
                                "verify"
                            ]
                        },
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{authToken}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"razorpay_order_id\": \"order_xxxxxxxxxxxxx\",\n  \"razorpay_payment_id\": \"pay_xxxxxxxxxxxxx\",\n  \"razorpay_signature\": \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n  \"amount\": 399900,\n  \"method\": \"upi\"\n}"
                        }
                    }
                }
            ]
        },
        {
            "name": "Webhooks",
            "item": [
                {
                    "name": "Razorpay Webhook (Test)",
                    "request": {
                        "method": "POST",
                        "url": {
                            "raw": "{{baseUrl}}/api/webhooks/razorpay",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "webhooks",
                                "razorpay"
                            ]
                        },
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "X-Razorpay-Signature",
                                "value": "test_signature_here"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"event\": \"payment.captured\",\n  \"payload\": {\n    \"payment\": {\n      \"entity\": {\n        \"id\": \"pay_test123\",\n        \"order_id\": \"order_test123\",\n        \"amount\": 399900,\n        \"method\": \"upi\"\n      }\n    }\n  }\n}"
                        }
                    }
                }
            ]
        },
        {
            "name": "Admin",
            "item": [
                {
                    "name": "Get Service Requests",
                    "request": {
                        "method": "GET",
                        "url": {
                            "raw": "{{baseUrl}}/api/admin/requests?page=1&limit=20",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "requests"
                            ],
                            "query": [
                                {
                                    "key": "page",
                                    "value": "1"
                                },
                                {
                                    "key": "limit",
                                    "value": "20"
                                },
                                {
                                    "key": "status",
                                    "value": "new",
                                    "disabled": true
                                }
                            ]
                        },
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{authToken}}"
                            }
                        ]
                    }
                },
                {
                    "name": "Get Dashboard Metrics",
                    "request": {
                        "method": "GET",
                        "url": {
                            "raw": "{{baseUrl}}/api/admin/metrics",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "metrics"
                            ]
                        },
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{authToken}}"
                            }
                        ]
                    }
                },
                {
                    "name": "Get Projects",
                    "request": {
                        "method": "GET",
                        "url": {
                            "raw": "{{baseUrl}}/api/admin/projects?limit=50",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "projects"
                            ],
                            "query": [
                                {
                                    "key": "limit",
                                    "value": "50"
                                },
                                {
                                    "key": "status",
                                    "value": "new",
                                    "disabled": true
                                }
                            ]
                        },
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{authToken}}"
                            }
                        ]
                    }
                },
                {
                    "name": "Get Tasks",
                    "request": {
                        "method": "GET",
                        "url": {
                            "raw": "{{baseUrl}}/api/admin/tasks?limit=50",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "admin",
                                "tasks"
                            ],
                            "query": [
                                {
                                    "key": "limit",
                                    "value": "50"
                                },
                                {
                                    "key": "status",
                                    "value": "new",
                                    "disabled": true
                                },
                                {
                                    "key": "priority",
                                    "value": "urgent",
                                    "disabled": true
                                }
                            ]
                        },
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{authToken}}"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "name": "Agent",
            "item": [
                {
                    "name": "List Available Triggers",
                    "request": {
                        "method": "GET",
                        "url": {
                            "raw": "{{baseUrl}}/api/agent/triggers",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "agent",
                                "triggers"
                            ]
                        },
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{authToken}}"
                            }
                        ]
                    }
                },
                {
                    "name": "Run Agent Trigger",
                    "request": {
                        "method": "POST",
                        "url": {
                            "raw": "{{baseUrl}}/api/agent/run",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "agent",
                                "run"
                            ]
                        },
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{authToken}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"trigger\": \"paymentSuccess\",\n  \"payload\": {\n    \"user_id\": \"test-user-id\",\n    \"client_email\": \"client@example.com\",\n    \"client_name\": \"Test Client\",\n    \"plan_slug\": \"starter\",\n    \"order_id\": \"test-order-id\",\n    \"payment_id\": \"test-payment-id\",\n    \"razorpay_payment_id\": \"pay_test\",\n    \"amount\": 399900\n  }\n}"
                        }
                    }
                }
            ]
        }
    ]
}